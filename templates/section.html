{% import "post_macros.html" as post_macros %}

<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  {% if page %}
  {% if page.description %}
  <meta name="description" content="{{ page.description }}" />
  {% elif config.description %}
  <meta name="description" content="{{ config.description }}" />
  {% endif %}
  {% elif config.description %}
  <meta name="description" content="{{ config.description }}" />
  {% endif %}

  <title>{% block title %}{{ config.title }} - {{ section.title | default(value="Section") }}{% endblock title %}</title>

  {%- if config.generate_feeds %}
  {%- for feed in config.feed_filenames %}

  {%- if feed is containing('atom') %}
  <link rel="alternate" type="application/atom+xml" title="{{ config.title }} Atom Feed" href="{{ get_url(path=feed, trailing_slash=false, lang=lang) | safe }}" />
  {%- endif %}

  {%- if feed is containing('rss') %}
  <link rel="alternate" type="application/rss+xml" title="{{ config.title }} RSS Feed" href="{{ get_url(path=feed, trailing_slash=false, lang=lang) | safe }}" />
  {%- endif %}

  {%- endfor %}
  {%- endif %}

  {% block css %}
  <link rel="stylesheet" href="{{ get_url(path='site.css', trailing_slash=false) | safe }}">
  {% endblock css %}

  {% block extra_head %}
  {% endblock extra_head %}
</head>

<body class="hack dark main container">
  {% block content %}
  {% block header %}
  {% if config.extra.after_dark_menu %}
  <header class="nav-header">
    <nav itemscope itemtype="http://schema.org/SiteNavigationElement" class="navbar">
      <div class="nav-links">
        {% for item in config.extra.after_dark_menu %}
        <a itemprop="url"
          class="{% if item.url | replace(from='$BASE_URL', to=config.base_url)==current_url %}active{% endif %}"
          href="{{ item.url | safe | replace(from='$BASE_URL', to=config.base_url) | safe }}">
          <span itemprop="name">{{ item.name }}</span></a>
        {% endfor %}
      </div>
    </nav>
    {% if config.extra.enable_search %}
    <div class="search-container">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" class="search-icon">
        <path stroke-linecap="round" stroke-linejoin="round"
          d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
      </svg>
      <input type="text" id="search" placeholder="Search...">
      <div class="search-results">
        <div class="search-results__items"></div>
      </div>
    </div>
    {% endif %}

  </header>
  {% endif %}
  {% endblock header %}

  <main>
    <header>
      <h1>{{ section.title }}</h1>
    </header>

    <div class="section-content">
        {{ section.content | safe }}
    </div>

    {% if section.subsections %}
    <h2>Secciones</h2>
    <ul>
        {% for subsection_path in section.subsections %}
        {% set subsection = get_section(path=subsection_path) %}
        <li><a href="{{ subsection.permalink }}">{{ subsection.title }}</a></li>
        {% endfor %}
    </ul>
    {% endif %}

    {% if section.pages %}
    <h2>PÃ¡ginas</h2>
    <ul>
        {% for page in section.pages %}
        <li><a href="{{ page.permalink }}">{{ page.title }}</a></li>
        {% endfor %}
    </ul>
    {% endif %}

  </main>
  {% endblock content %}

  <!-- optional scripts -->
  {% block scripts %}
  {% if config.extra.codeblock %}
  <script src="{{ get_url(path='js/codeblock.js', trailing_slash=false) | safe }}"></script>
  {% endif %}

  {% include "partials/latex.html" %}
  {% include "partials/search.html" %}
  {% include "partials/analytics.html" %}

  {% endblock scripts %}
</body>

</html>
